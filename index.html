<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="博客, jerome, github, react.js">
<meta property="og:type" content="website">
<meta property="og:title" content="浮生如斯的博客">
<meta property="og:url" content="http://gudianjita.cn/index.html">
<meta property="og:site_name" content="浮生如斯的博客">
<meta property="og:description" content="博客, jerome, github, react.js">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浮生如斯的博客">
<meta name="twitter:description" content="博客, jerome, github, react.js">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 浮生如斯的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?8cd5b30ec9712e3051baec8e582e49a0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">浮生如斯的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/01/04/Mac下git多个SSH-KEY配置/" itemprop="url">
                  Mac下git多个SSH KEY配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-01-04T15:58:16+08:00" content="2018-01-04">
              2018-01-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2018/01/04/Mac下git多个SSH-KEY配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/04/Mac下git多个SSH-KEY配置/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>自己的电脑上有用到几个不同的git，之前只是clone github上http的地址拿下来看，后来个人项目也需要开发，就需要好几个ssh key，写下这个记录一下过程，省的每次忘记流程还重新记录。</p>
<h4 id="生成SSH-KEY"><a href="#生成SSH-KEY" class="headerlink" title="生成SSH KEY"></a>生成SSH KEY</h4><ul>
<li><p>生成SSH KEY时，首先进入<code>~/.ssh/</code>目录下，使用<code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code>生成ssh key信息，第一次提示”Enter file in which to save the key (/Users/JeromeGao/.ssh/id_rsa)”时，可以使用默认文件名字，但是之后生成ssh key记得填写相应的文件名，，以便区分，”Enter passphrase (empty for no passphrase)”是私钥密码，可以直接回车也可以输入密码，如果输入密码请记住私钥的密码， 下面导入私钥的时候要用到。<br>命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh/</span><br><span class="line">➜  .ssh ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/JeromeGao/.ssh/id_rsa): id_rsa_gittest</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in id_rsa_gittest.</span><br><span class="line">Your public key has been saved in id_rsa_gittest.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:5/5+BIyhVKH3MRoGIs5vn36aKmuppQqgIBJ69KTHND8 gaojianqi6@126.com</span><br><span class="line">The key&apos;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|    . . ..o.     |</span><br><span class="line">|   o . ..o.      |</span><br><span class="line">|. . *  ...++o    |</span><br><span class="line">|.o * +  .o.+oo   |</span><br><span class="line">|* o + E S o ..   |</span><br><span class="line">|*. . . o +    .  |</span><br><span class="line">|o   ..  o .  .   |</span><br><span class="line">|.  o+  . o.   .  |</span><br><span class="line">|..oo.o..+o.oo.   |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure>
</li>
<li><p>将SSH 私钥增加到ssh-agent: <code>ssh-add ~/.ssh/xxx_rsa</code>， 这里会提示输入一次私钥的密码;</p>
</li>
<li>查看已经添加过的SSH KEY： ssh-add -l；</li>
<li>在相对应的网站上找到SSH KEYS，然后打开<code>~/.ssh/id_rsa.pub</code>, 复制公钥内容到Key中，然后点击添加就完成了</li>
</ul>
<h4 id="一台机器上管理多个GIT帐号的SSH-KEY"><a href="#一台机器上管理多个GIT帐号的SSH-KEY" class="headerlink" title="一台机器上管理多个GIT帐号的SSH KEY"></a>一台机器上管理多个GIT帐号的SSH KEY</h4><ul>
<li>如果你在一台机器上，使用多个git账号，则重复上面步骤之后，需要编辑文件<code>~/.ssh/config</code>:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#Github  (github 配置)</span><br><span class="line">Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line"></span><br><span class="line">#company  (公司git 配置)</span><br><span class="line">Host company</span><br><span class="line">    HostName git.company.com</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">  #gitlab  (gitlab 配置)</span><br><span class="line">  Host gitlab</span><br><span class="line">      HostName gitlab.com</span><br><span class="line">      User git</span><br><span class="line">      IdentityFile ~/.ssh/id_rsa_gitlab</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>解释一下这个配置文件：</p>
<p>Host：一个”别名”，可以随意命名, 像git、company这样的命名也可以；<br>HostName：工作的git仓库存储地址;<br>IdentityFile： 所使用的公钥文件<br>配置完毕，用下面的命令测试一下：</p>
<h4 id="测试SSH-KEY"><a href="#测试SSH-KEY" class="headerlink" title="测试SSH KEY"></a>测试SSH KEY</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 测试是否联通，出现welcome就表示成功</span><br><span class="line">➜  .ssh ssh -T git@gitlab.com</span><br><span class="line">Welcome to GitLab, !</span><br><span class="line"></span><br><span class="line"># 可以出来调试信息</span><br><span class="line">➜  .ssh ssh -v git@gitlab.com</span><br></pre></td></tr></table></figure>
<p>记得配置自己的username和email，一般在网站新建项目时会提示你配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name your_name</span><br><span class="line">git config user.email your_email</span><br></pre></td></tr></table></figure></p>
<h4 id="ssh命令收集"><a href="#ssh命令收集" class="headerlink" title="ssh命令收集"></a>ssh命令收集</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 将SSH 私钥增加到ssh-agent</span><br><span class="line">ssh-add ~/.ssh/xxx_rsa</span><br><span class="line"># 查看已经添加过的SSH KEY</span><br><span class="line">ssh-add -l</span><br><span class="line"># 运行ssh-agent，它会打印出来它使用的环境和变量</span><br><span class="line">ssh-agent</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/26/微信分享踩过的坑/" itemprop="url">
                  微信分享踩过的坑
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-26T19:27:13+08:00" content="2017-04-26">
              2017-04-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/04/26/微信分享踩过的坑/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/26/微信分享踩过的坑/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="微信分享在SPA网页中配置的分享会失效"><a href="#微信分享在SPA网页中配置的分享会失效" class="headerlink" title="微信分享在SPA网页中配置的分享会失效"></a>微信分享在SPA网页中配置的分享会失效</h2><p>之前主要是在iPhone上面测试H5网页分享出去的效果，所以一直也没有发现单页应用在android上pushState一次之后就分享信息就会失效。<br>JSSDK不知道什么时候更新的官方信息：</p>
<blockquote>
<p>所有需要使用JS-SDK的页面必须先注入配置信息，否则将无法调用（同一个url仅需调用一次，对于变化url的SPA的web app可在每次url变化时进行调用,目前Android微信客户端不支持pushState的H5新特性，所以使用pushState来实现web app的页面会导致签名失败，此问题会在Android6.2中修复）。</p>
</blockquote>
<p>所以如果你用的vue router或者react router的话，在pushState页面路径变化之后，可以在判断当前页面是微信浏览器并且是android手机的情况下，重新发起获取微信配置信息，然后调用wx.config()，这样就没问题了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// react router历史记录</span></span><br><span class="line"><span class="keyword">const</span> history = syncHistoryWithStore(browserHistory, store);</span><br><span class="line"></span><br><span class="line">history.listen((location) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 判断android下面 每次URL变化时重新获取wxJSConfig信息</span></span><br><span class="line">    <span class="keyword">if</span> (isWeixin() &amp;&amp; isAndroid())</span><br><span class="line">      <span class="built_in">window</span>.getWXJSConfigInfo();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="微信分享更改规则，网页必须分享当前页面的URL"><a href="#微信分享更改规则，网页必须分享当前页面的URL" class="headerlink" title="微信分享更改规则，网页必须分享当前页面的URL"></a>微信分享更改规则，网页必须分享当前页面的URL</h2><p>项目里有一个用户登录之后在微信中分享会分享另外一个域名的页面，这个在前两天还在用的功能，突然就出了bug，测试了好久，一直在找签名和自己代码的问题，最后偶然间发现是微信的分享规则变化，改成分享当前页面URL后，就可以了。<br>吐槽一下微信的分享规则越来越封闭了，而且开启了分享的debug之后并没有提示出明确的出错信息，导致调试走了很多弯路。<br>官方链接: <a href="https://mp.weixin.qq.com/s?__biz=MjM5NDAxMDg4MA==&mid=2650959286&idx=1&sn=0827bb3e1a2cc6fd21d4e01eb82ea1be&chksm=bd788fd98a0f06cfd318c01ec3d800698d47d54964eed389c5e7a1590a711bd6535b71479475&mpshare=1&scene=1&srcid=04278iABAZ5L0ODrjNMySLOu&key=4072c9c24e3c084ca373b8a0b7aa3015ed3051c2abd206faeb247cb6be24de72ffe7562ccb0ee5a91a0dd8ee8c00bbd1d58d334552b659cfb882dca36b6830d53fa5d2aed81002ae27b4ae08279e29c9&ascene=0&uin=NzUwOTgxNzQw&devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.12.4+build(16E195)&version=12020510&nettype=WIFI&fontScale=100&pass_ticket=nc8ftsj0ecDjCrmtnfmdRqIpYfd%2FH2VE4NwyksxemTcUXkDyIStPpq74sAjaCqY0" target="_blank" rel="external"><br>JSSDK自定义分享接口的策略调整<br></a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/18/react的滑动效果，react-swipe和react-motion/" itemprop="url">
                  react的滑动效果，react-swipe和react-motion
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-18T17:18:44+08:00" content="2017-04-18">
              2017-04-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/04/18/react的滑动效果，react-swipe和react-motion/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/18/react的滑动效果，react-swipe和react-motion/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这次在项目中需要用到焦点图滑动效果和在页面一个浮层中增加一个滑动的动画效果，之前已经写过很多次滑动效果的页面了，但是都没有留下记录。<br>现在记载下这次在项目中使用react-swipe和react-motion的收获。</p>
<h3 id="react-swipe"><a href="#react-swipe" class="headerlink" title="react-swipe"></a>react-swipe</h3><p>安装需要同时安装swipe-js-jso包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react swipe-js-iso react-swipe</span><br></pre></td></tr></table></figure>
<p>常用属性介绍：<br>continuous: 循环到最后一个时继续滑动是否从头开始，默认为true<br>transitionEnd：滑动动画结束时调用，callback(index, item), index为当前滑动的下标，item为当前被滑动的元素<br>因为swipe没有提供轮滑图中显示的提示圆点之类，自己可以根据下标在上面加上提示用户的圆点等。</p>
<p>示例代码:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import ReactSwipe from 'react-swipe';</span></span><br><span class="line">&lt;div className=<span class="string">"welfare-focus-wrap"</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">ReactSwipe</span> <span class="attr">className</span>=<span class="string">"carousel"</span> <span class="attr">swipeOptions</span>=<span class="string">&#123;&#123;continuous:</span> <span class="attr">true</span>, <span class="attr">transitionEnd:</span> (<span class="attr">index</span>) =&gt;</span> &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      focusIndex: index,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;&#125;&#125;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">      this.state.activityDetails.map((item, index) =&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">welfareFocusWrap</span> <span class="attr">focusIndex</span>$&#123;<span class="attr">index</span>&#125;`&#125; <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">welfareFocus</span>$&#123;<span class="attr">index</span>&#125;`&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; location.href = item.activityUrl;&#125;&#125;&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;item.pictureUrl&#125;</span> <span class="attr">className</span>=<span class="string">"welfareFocusImg"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ReactSwipe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"welfare-focus-circle-wrap"</span>&gt;</span></span><br><span class="line">    &#123;</span><br><span class="line">      this.state.activityDetails.map((item, index) =&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span><br><span class="line">          <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">welfareFocusCircle</span> $&#123;<span class="attr">this.state.focusIndex</span> == <span class="string">index</span> ? '<span class="attr">checked</span>' <span class="attr">:</span> ''&#125;`&#125;</span><br><span class="line">          <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">welfareFocusCircle</span>$&#123;<span class="attr">index</span>&#125;`&#125; /&gt;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>github地址：<a href="https://github.com/voronianski/react-swipe" target="_blank" rel="external">react-swipe</a> 、<a href="https://github.com/voronianski/swipe-js-iso" target="_blank" rel="external">swipe-js-iso</a></p>
<h3 id="react-motion"><a href="#react-motion" class="headerlink" title="react-motion"></a>react-motion</h3><p>在没实际写代码测试时候，对motion的概念感觉似懂非懂，翻了很多介绍react-motion的资料，在写了代码测试之后，理解react-motion是做了对<br>动画过程中从A点到B点平滑的变化数值，在数值变化过程中，react-motion会不断的调用回调方法，把变动的数值传入到需要渲染的dom中，<br>这个比自己实现的定时滑动会更加的平滑自然。</p>
<p>因为要兼容手机不同分辨率滑动的单位距离不一致，所以在Motion的外层div的onLoad事件中，每次通过元素的clientWidth来获得滑动的距离，在react中不得已使用了<br>dom，谁有更好的办法欢迎告诉我。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stepbarLeft = <span class="keyword">this</span>.state.stepbarLeft;</span><br><span class="line"><span class="keyword">const</span> oldStepbarLeft = curQuestionIndex &gt; <span class="number">0</span> ? (curQuestionIndex <span class="number">-1</span>)*stepbarLeft : <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> newStepbarLeft = stepbarLeft*curQuestionIndex;</span><br><span class="line"><span class="keyword">const</span> currentNode = (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Motion</span> <span class="attr">defaultStyle</span>=<span class="string">&#123;&#123;left:</span> <span class="attr">oldStepbarLeft</span> &#125;&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;left:</span> <span class="attr">spring</span>(<span class="attr">newStepbarLeft</span>)&#125;&#125;&gt;</span></span><br><span class="line">    &#123;</span><br><span class="line">      // 在动画执行过程中，react-motion会不断的调用此方法，返回动画进行过程中相应的数值，可以自己cosole输出interpolatingStyle看</span><br><span class="line">      interpolatingStyle =&gt; &#123;</span><br><span class="line">        return (</span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"questionPageCurNode"</span> <span class="attr">style</span>=<span class="string">&#123;interpolatingStyle&#125;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;questionPageCurrentImage&#125;</span> <span class="attr">className</span>=<span class="string">"questionPageCurDot"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"questionPageCurSequence"</span>&gt;</span>&#123; curQuestionIndex + 1 &#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">Motion</span>&gt;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">return (</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"questionPageHeader"</span> <span class="attr">onLoad</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="line">    const left = document.querySelectorAll('.questionPageNode')[3].clientWidth + document.querySelectorAll('.questionPageLine')[3].clientWidth;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      stepbarLeft: left,</span><br><span class="line">      conentLeft: document.querySelector('.questionPageContentsArea').clientWidth,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;&#125;&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"questionPageStepbar"</span>&gt;</span></span><br><span class="line">      &#123;stepbar&#125;</span><br><span class="line">      &#123;currentNode&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">);</span></span><br></pre></td></tr></table></figure>
<p>github地址：<a href="https://github.com/chenglou/react-motion" target="_blank" rel="external">react-motion</a><br>Motion参考资料：<a href="https://segmentfault.com/a/1190000004224778" target="_blank" rel="external">React Motion 缓动函数剖析</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/25/React和Webpack项目构建/" itemprop="url">
                  React和Webpack项目构建
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-25T18:24:07+08:00" content="2016-08-25">
              2016-08-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/25/React和Webpack项目构建/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/25/React和Webpack项目构建/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这次在项目中使用了React，并使用webpack来打包js文件，gulp来编译stylus等其他事情。</p>
<p>最开始我们想达到的效果，希望能够根据webpack能够把reactjs打包成项目可以使用的文件，在项目目录中新建webpack.config.js文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> BUILD_DIR = path.resolve(__dirname, <span class="string">'content/jsx'</span>);</span><br><span class="line"><span class="keyword">var</span> APP_DIR = path.resolve(__dirname, <span class="string">'content/scripts'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	<span class="comment">//是否让webpack监听入口相关的文件</span></span><br><span class="line">	watch: <span class="literal">true</span>,</span><br><span class="line">	<span class="comment">//配置入口文件，入口文件可以以对象的形式配置，也可以以数组的形式配置,后缀名可以省略</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        index: path.join(BUILD_DIR, <span class="string">'index.jsx'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//输出文件出口</span></span><br><span class="line">    output: &#123;</span><br><span class="line">    	<span class="comment">/*</span><br><span class="line">         输出路径，在这我们要手动创建一个文件夹，名字可以自己命名，</span><br><span class="line">         输出的文件路径是相对于本文件的路径</span><br><span class="line">        **/</span></span><br><span class="line">        path: APP_DIR,    <span class="comment">//输出路径</span></span><br><span class="line">        filename: <span class="string">'[name].bundle.js'</span>   <span class="comment">//输出文件名，文件可以自己定义，[name]的意思是与入口文件的文件对应，可以不用[name]</span></span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.jsx'</span>],</span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        * 别名配置，配置之后，可以在别的js文件中直接使用require('d3')，将导入的文件作为一个模块导入到你需要的项目中，不用配置别也可会当作模块导入项目中，只是你要重复写路径而已。</span><br><span class="line">        **/</span></span><br><span class="line">        alias: &#123;</span><br><span class="line">            <span class="string">'d3'</span>: <span class="string">'d3/d3.min.js'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">    	<span class="comment">/*</span><br><span class="line">	    * 标题：加载器（loaders）</span><br><span class="line">	    * 作用：需要下载不同别的加载器，如css，js，png等等</span><br><span class="line">	    **/</span></span><br><span class="line">        loaders: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js(x?)$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">                loader: <span class="string">'babel'</span>,</span><br><span class="line">                query: &#123;</span><br><span class="line">                    presets: [<span class="string">'react'</span>, <span class="string">'es2015'</span>, <span class="string">'stage-0'</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Webpack的一些命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ webpack --config XXX.js //使用另一份配置文件（比如webpack.config2.js）来打包</span><br><span class="line">$ webpack --watch //监听变动并自动打包</span><br><span class="line">$ webpack -p//压缩混淆脚本，这个非常非常重要！</span><br><span class="line">$ webpack <span class="_">-d</span>//生成map映射文件，告知哪些模块被最终打包到哪里了</span><br></pre></td></tr></table></figure>
<p>但是这样打包出来的文件会很大，</p>
<p>这个可以使用webpack的externals来设置webpack将依赖的库指向全局变量，从而不导入这个js文件。</p>
<p>但是如果引用的包比较多的情况下，维护起来会比较麻烦，所以使用webpack的dll plugin来解决这个问题。<br>使用这个功能需要把打包过程分成两步：</p>
<ol>
<li>打包ddl包</li>
<li>引用ddl包，打包业务代码</li>
</ol>
<p>首先建一个，webpack.dll.config.js文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> APP_DIR = path.resolve(__dirname, <span class="string">'content/scripts'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vendors = [</span><br><span class="line">    <span class="string">"react"</span>,</span><br><span class="line">    <span class="string">"react-bootstrap"</span>,</span><br><span class="line">    <span class="string">"react-dom"</span>,</span><br><span class="line">    <span class="string">"react-redux"</span>,</span><br><span class="line">    <span class="string">"react-router"</span>,</span><br><span class="line">    <span class="string">"react-router-redux"</span>,</span><br><span class="line">    <span class="string">"redux"</span>,</span><br><span class="line">    <span class="string">"redux-logger"</span>,</span><br><span class="line">    <span class="string">"redux-promise"</span>,</span><br><span class="line">    <span class="string">"redux-thunk"</span>,</span><br><span class="line">    <span class="string">"whatwg-fetch"</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(APP_DIR, <span class="string">'/'</span>),</span><br><span class="line">        filename: <span class="string">'[name].dll.js'</span>,</span><br><span class="line">        <span class="comment">/**</span><br><span class="line">	     * output.library</span><br><span class="line">	     * 将会定义为 window.$&#123;output.library&#125;</span><br><span class="line">	     * 在这次的例子中，将会定义为`window.[name]_[chunkhash]`</span><br><span class="line">	    */</span></span><br><span class="line">        library: <span class="string">'[name]_[chunkhash]'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    entry: &#123;</span><br><span class="line">        vendor: vendors,</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">        	<span class="comment">/**</span><br><span class="line">		    * path</span><br><span class="line">		    * 定义 manifest 文件生成的位置</span><br><span class="line">		    * 也可以设置[name]manifest.json,[name]部分由entry的名字替换</span><br><span class="line">		    */</span></span><br><span class="line">            path: <span class="string">'manifest.json'</span>,</span><br><span class="line">            <span class="comment">/**</span><br><span class="line">		    * name</span><br><span class="line">		    * dll bundle 输出到那个全局变量上</span><br><span class="line">		    * 和 output.library 一样即可。 </span><br><span class="line">		    */</span></span><br><span class="line">            name: <span class="string">'[name]_[chunkhash]'</span>,</span><br><span class="line">            context: __dirname</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>webpack.DllPlugin 的选项中：</p>
<p>path 是 manifest.json 文件的输出路径，这个文件会用于后续的业务代码打包；<br>name 是 dll 暴露的对象名，要跟 output.library 保持一致；<br>context 是解析包路径的上下文，这个要跟接下来配置的 webpack.config.js 一致。</p>
<p>PS：自己用gulp来执行的webpack打包，只打出来vendor文件，没有出来manifest.json，改用webpack命令打包就好了。</p>
<p>运行之后会生成两个文件，一个是所有引用的js文件，另一个是manifest.json:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  webapp git:(dev_jerome) ✗ ./node_modules/.bin/webpack --config webpack.dll.config.js </span><br><span class="line">Hash: fd919a411af8bb56f919</span><br><span class="line">Version: webpack 1.13.2</span><br><span class="line">Time: 2389ms</span><br><span class="line">        Asset    Size  Chunks             Chunk Names</span><br><span class="line">vendor.dll.js  1.6 MB       0  [emitted]  vendor</span><br><span class="line">   [0] dll vendor 12 bytes &#123;0&#125; [built]</span><br><span class="line">    + 533 hidden modules</span><br><span class="line">➜  webapp git:(dev_jerome) ✗</span><br></pre></td></tr></table></figure></p>
<p>再在原来的webpack.config文件里面增加DllReferencePlugin的配置，需要注意的是这里面的context需要和dll.config里面的context一样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> BUILD_DIR = path.resolve(__dirname, <span class="string">'content/jsx'</span>);</span><br><span class="line"><span class="keyword">var</span> APP_DIR = path.resolve(__dirname, <span class="string">'content/scripts'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    watch: <span class="literal">true</span>,</span><br><span class="line">    entry: &#123;</span><br><span class="line">        index: path.join(BUILD_DIR, <span class="string">'index.jsx'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: APP_DIR,</span><br><span class="line">        filename: <span class="string">'[name].bundle.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        loaders: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js(x?)$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">                loader: <span class="string">'babel'</span>,</span><br><span class="line">                query: &#123;</span><br><span class="line">                    presets: [<span class="string">'react'</span>, <span class="string">'es2015'</span>, <span class="string">'stage-0'</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    externals: &#123;</span><br><span class="line">        <span class="string">"jquery"</span>: <span class="string">"jQuery"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">            context: __dirname,</span><br><span class="line">            manifest: <span class="built_in">require</span>(<span class="string">'./manifest.json'</span>)</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.NoErrorsPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>webpack.DllReferencePlugin 的选项中：</p>
<p>context 需要跟之前保持一致，这个用来指导 Webpack 匹配 manifest.json 中库的路径；<br>manifest 用来引入刚才输出的 manifest.json 文件。<br>DllPlugin 本质上和我们手动分离第三方库是一样的，但是对依赖包极多的项目来说，自动化明显加快了生产效率。</p>
<p>可以在package.json里面设置运行脚本,如果依赖的脚本没有变化的话可以只用执行bundle任务。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --config webpack.dll.config.js &amp;&amp; gulp bundle"</span>,</span><br><span class="line">    <span class="string">"bundle"</span>: <span class="string">"./node_modules/.bin/gulp bundle"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>下面是依赖的gulp文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> webpackStream = <span class="built_in">require</span>(<span class="string">'webpack-stream'</span>);</span><br><span class="line"><span class="keyword">var</span> webpackConfig = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> watch = <span class="built_in">require</span>(<span class="string">'gulp-watch'</span>);</span><br><span class="line"><span class="keyword">var</span> gulpWebpack = <span class="built_in">require</span>(<span class="string">'gulp-webpack'</span>);</span><br><span class="line"><span class="keyword">var</span> gutil = <span class="built_in">require</span>(<span class="string">'gulp-util'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'bundle'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ENTYR_DIR = path.join(__dirname, <span class="string">"content/jsx"</span>);</span><br><span class="line">    <span class="keyword">var</span> DIST_DIR = path.join(__dirname, <span class="string">"content/scripts"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> gulp.src(path.join(ENTYR_DIR, <span class="string">"index.jsx"</span>))</span><br><span class="line">        .pipe(webpackStream(<span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>)))</span><br><span class="line">        .pipe(gulp.dest(DIST_DIR));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'bundle-dll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> myConfig = <span class="built_in">Object</span>.create(<span class="built_in">require</span>(<span class="string">'./webpack.dll.config.js'</span>));</span><br><span class="line">    myConfig.plugins = [</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.DedupePlugin(),</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin()</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// run webpack</span></span><br><span class="line">    webpack(myConfig, <span class="function"><span class="keyword">function</span>(<span class="params">err, stats</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> <span class="keyword">new</span> gutil.PluginError(<span class="string">'webpack'</span>, err);</span><br><span class="line">        gutil.log(<span class="string">'[webpack]'</span>, stats.toString(&#123;</span><br><span class="line">            colors: <span class="literal">true</span>,</span><br><span class="line">            progress: <span class="literal">true</span></span><br><span class="line">        &#125;));</span><br><span class="line">        callback();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'bundle-watch'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> ENTYR_DIR = path.join(__dirname, <span class="string">"content/jsx"</span>);</span><br><span class="line">    <span class="keyword">var</span> DIST_DIR = path.join(__dirname, <span class="string">"content/scripts"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'content/**/*.jsx'</span>, <span class="string">'content/**/*.js'</span>])</span><br><span class="line">        .pipe(watch(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> gulp.src(path.join(ENTYR_DIR, <span class="string">"index.jsx"</span>))</span><br><span class="line">                .pipe(webpackStream(webpackConfig))</span><br><span class="line">                .pipe(gulp.dest(DIST_DIR));</span><br><span class="line">        &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'webpack'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> myConfig = <span class="built_in">Object</span>.create(webpackConfig);</span><br><span class="line">    myConfig.plugins = [</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.DedupePlugin(),</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin()</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// run webpack</span></span><br><span class="line">    webpack(myConfig, <span class="function"><span class="keyword">function</span>(<span class="params">err, stats</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> <span class="keyword">new</span> gutil.PluginError(<span class="string">'webpack'</span>, err);</span><br><span class="line">        gutil.log(<span class="string">'[webpack]'</span>, stats.toString(&#123;</span><br><span class="line">            colors: <span class="literal">true</span>,</span><br><span class="line">            progress: <span class="literal">true</span></span><br><span class="line">        &#125;));</span><br><span class="line">        callback();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'gulpWebpack'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ENTYR_DIR = path.join(__dirname, <span class="string">"content/jsx"</span>);</span><br><span class="line">    <span class="keyword">var</span> DIST_DIR = path.join(__dirname, <span class="string">"content/scripts"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> gulp.src(path.join(ENTYR_DIR, <span class="string">"index.jsx"</span>))</span><br><span class="line">        .pipe(gulpWebpack(webpackConfig))</span><br><span class="line">        .pipe(gulp.dest(DIST_DIR));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>参考文章: <a href="http://blog.csdn.net/u011413061/article/details/51872412" target="_blank" rel="external">如何十倍提高你的webpack构建效率</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/08/IE下Placeholder的兼容处理/" itemprop="url">
                  IE下Placeholder的兼容处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-08T15:49:53+08:00" content="2016-07-08">
              2016-07-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/08/IE下Placeholder的兼容处理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/08/IE下Placeholder的兼容处理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="placeholder"><a href="#placeholder" class="headerlink" title="placeholder"></a>placeholder</h2><p>placeholder是html5新增的一个属性，当input或者textarea设置了这个属性之后，placeholder的值会作为灰字提示显示在该输入框上，当文本框获取焦点之后或者用户输入一个字符之后，则提示文字消失。这个属性在IE 10中对他的支持才好一点，而用户还有好多使用IE7、8、9的，所以还是需要在旧的浏览器中对他进行一下处理。</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>网上对placeholder的解决办法大多数是对placeholder进行判断，在不支持placeholder属性的浏览器中，检测blur和focus事件，直接把placeholder的值赋在该元素的value上，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">placeholder</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="regexp">/MSIE\s(\d+)/</span>.test(navigator.userAgent) &amp;&amp; navigator.userAgent.match(<span class="regexp">/MSIE\s(\d+)/</span>)[<span class="number">1</span>] &lt; <span class="number">10</span>) &#123;</span><br><span class="line">		$(<span class="string">'[placeholder]'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> pla = $(<span class="keyword">this</span>).attr(<span class="string">'placeholder'</span>);</span><br><span class="line">			$(<span class="keyword">this</span>).focus(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> ($(<span class="keyword">this</span>).val() == pla) &#123;</span><br><span class="line">					$(<span class="keyword">this</span>).val(<span class="string">''</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;).blur(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span> ($(<span class="keyword">this</span>).val() == <span class="string">''</span>) &#123;</span><br><span class="line">					$(<span class="keyword">this</span>).val(pla);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">			$(<span class="keyword">this</span>).trigger(<span class="string">'blur'</span>); <span class="comment">//此处利用blur事件,为了业务需求。防止页面上查询后，文本框需要保留搜索的关键被placeholder代替</span></span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	placeholder();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>或者一些公用库对他也有很好的实现，如<a href="https://jamesallardice.github.io/Placeholders.js/" target="_blank" rel="external">Placeholders.js</a>。</p>
<p>但是，如果在项目中用到了验证表单的库，像<a href="https://jqueryvalidation.org/" target="_blank" rel="external">jquery.validation</a>这样的，也是对输入框的值进行了验证，那么在使用Placeholder的时候会有一些问题，比如发现值是错的对他改变了颜色之类的。</p>
<h2 id="最终的解决办法"><a href="#最终的解决办法" class="headerlink" title="最终的解决办法"></a>最终的解决办法</h2><p>所以后来就决定在输入框后面加一个span元素，当页面dom加载完毕之后，对所有符合条件的input、textarea进行处理，默认把他们的placeholder赋值在后面的span元素上面，点击的时候隐藏提示，离开的时候判断输入框是否有值来对他进行显示。<br>代码中采用了<a href="https://jamesallardice.github.io/Placeholders.js/" target="_blank" rel="external">Placeholders.js</a>的一些思路，使用createTextNode来添加css，这样只用引进一个js文件就有默认的placeholder样式。</p>
<p>检查的时候会对display为none、type等于hidden、class为hidePassword和placehloder-check为false的直接跳过，不进行处理。</p>
<p>使用的时候需要提前引用jQuery。</p>
<h3 id="写的时候遇到的问题"><a href="#写的时候遇到的问题" class="headerlink" title="写的时候遇到的问题"></a>写的时候遇到的问题</h3><p>jQuery在父元素display为none时，计算width，会加上padding-left 和padding-right,而不去管box-sizing 是否为border-box，发现这个问题之后在代码中对当前元素进行了判断，如果是hidden的话，则使用width()方法获取宽度，不是的话，则全使用css(“width”)获取宽度。<br>判断方法:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.is(<span class="string">":visible"</span>)  .is(<span class="string">":hidden"</span>))</span><br></pre></td></tr></table></figure>
<p>项目地址：<a href="https://github.com/gaojianqi6/placeholder.jquery.js" target="_blank" rel="external">https://github.com/gaojianqi6/placeholder.jquery.js</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/26/JS的一些基础问题/" itemprop="url">
                  JS的一些基础问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-26T14:35:37+08:00" content="2016-05-26">
              2016-05-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/26/JS的一些基础问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/26/JS的一些基础问题/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、如果给定一个字符串，怎么返回成一个JS的Dom对象。-比如下面的这个字符串："><a href="#1、如果给定一个字符串，怎么返回成一个JS的Dom对象。-比如下面的这个字符串：" class="headerlink" title="1、如果给定一个字符串，怎么返回成一个JS的Dom对象。 比如下面的这个字符串："></a>1、如果给定一个字符串，怎么返回成一个JS的Dom对象。 比如下面的这个字符串：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;测试&lt;span&gt;cd&lt;<span class="regexp">/span&gt;&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>
<p>这个要用到浏览器的innerHTML来实现了，首先使用createElement来创建一个div元素，然后使用innerHTML把字符串设置为它的子元素，然后再返回他的子元素就可以了。实现例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseDom</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> objParent = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">	objParent.innerHTML = str;</span><br><span class="line">	<span class="keyword">return</span> objParent.childNodes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">parseDom(<span class="string">"&lt;div&gt;测试&lt;span&gt;cd&lt;/span&gt;&lt;/div&gt;"</span>);</span><br></pre></td></tr></table></figure>
<p>那这里面的childNodes返回的是一个数组，如果确定传入的是一个元素，则使用下标取第一个就行，parseDom(‘&lt;div&gt;&lt;/div&gt;’)[0]</p>
<h3 id="2、给一个父元素，怎么遍历下面的所有子元素。"><a href="#2、给一个父元素，怎么遍历下面的所有子元素。" class="headerlink" title="2、给一个父元素，怎么遍历下面的所有子元素。"></a>2、给一个父元素，怎么遍历下面的所有子元素。</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"ID"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"1"</span>&gt;</span>内容1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"2_1"</span>&gt;</span>内容2.1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"2_1"</span>&gt;</span>内容2.1<span class="tag">&lt;/<span class="name">div</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"3"</span>&gt;</span>内容3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用childNodes获取元素的子节点，但是在FF和Chrome下面换行符也会当成一个元素储存在元素列表里，所以根据元素的nodeName来判断，如果是的话，则删除当前元素。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getChildNodes</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> nodes = obj.childNodes,</span><br><span class="line">		objNode,</span><br><span class="line">		i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(; i &lt; nodes.length; i++)&#123;</span><br><span class="line">		objNode = nodes[i];</span><br><span class="line">		<span class="comment">//当元素里面有节点类型是文本并且文本类型节点的节点值是空的。就把他删除。</span></span><br><span class="line">		<span class="comment">//nodeNames可以得到一个节点的节点类型，nodeValue表示得到这个节点里的值</span></span><br><span class="line">		<span class="comment">// /\s/是非空字符在JS里的正则表达式,如：</span></span><br><span class="line">		<span class="comment">// /\s/.test(" ") //true</span></span><br><span class="line">		<span class="comment">// /\s/.test("sdf") //false</span></span><br><span class="line">		<span class="keyword">if</span>(objNode.nodeName == <span class="string">"#text"</span> &amp;&amp; <span class="regexp">/\s/</span>.test(objNode.nodeValue))&#123;</span><br><span class="line">			obj.removeChild(objNode);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> obj.childNodes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getChildNodes(<span class="built_in">document</span>.getElementById(<span class="string">"ID"</span>));</span><br></pre></td></tr></table></figure></p>
<h3 id="3、给一个冒泡排序。"><a href="#3、给一个冒泡排序。" class="headerlink" title="3、给一个冒泡排序。"></a>3、给一个冒泡排序。</h3><p><a href="http://www.cnblogs.com/wangfupeng1988/archive/2011/12/26/2302216.html" target="_blank" rel="external">【轻松学排序算法】眼睛直观感受几种常用排序算法</a><br><a href="http://www.52codes.net/article/2331.html" target="_blank" rel="external">js实现数组冒泡排序、快速排序原理</a><br><a href="http://www.cnblogs.com/aaronjs/p/3539538.html" target="_blank" rel="external">Javascript算法系列之快速排序（Quicksort）</a></p>
<h3 id="4、retina屏幕如何实现真正1px的边框线"><a href="#4、retina屏幕如何实现真正1px的边框线" class="headerlink" title="4、retina屏幕如何实现真正1px的边框线"></a>4、retina屏幕如何实现真正1px的边框线</h3><p>解决办法:<br>1、判断浏览器是否支持0.5PX的线，支持给html元素添加一个class<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hairlines</span> <span class="selector-tag">div</span> &#123;   <span class="attribute">border-width</span>: <span class="number">0.5px</span>; &#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.devicePixelRatio &amp;&amp; devicePixelRatio &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> testElem = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  testElem.style.border = <span class="string">'.5px solid transparent'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(testElem);</span><br><span class="line">  <span class="keyword">if</span> (testElem.offsetHeight == <span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'html'</span>).classList.add(<span class="string">'hairlines'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(testElem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 脚本应该放在 &lt;body&gt; 内， 如果在 &lt;head&gt; 里面运行，需要包装 $(document).ready(function() &#123;   &#125;)</span></span><br></pre></td></tr></table></figure>
<p>不过这个兼容不了安卓设备，而且ios 8以下不支持，所以还是得安卓支持才能用。。<br>2、使用图片完成border<br>一个6*6的图片<br><img src="http://o7bfyflfi.bkt.clouddn.com/image/blogs/border-bg.png" alt="切图"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border</span>&#123;     <span class="attribute">border-width</span>: <span class="number">1px</span>;     <span class="attribute">border-image</span>: <span class="built_in">url</span>(border.gif) <span class="number">2</span> repeat; &#125;</span><br></pre></td></tr></table></figure>
<p>缺点是每次改变颜色都要重新切图。<br>3、用多背景渐变实现的，设置 1px 的渐变背景，50% 有颜色，50% 透明<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.border</span> &#123;     <span class="attribute">background</span>:     <span class="built_in">linear-gradient</span>(180deg, black, black 50%, transparent 50%) top    left  / <span class="number">100%</span> <span class="number">1px</span> no-repeat,     <span class="built_in">linear-gradient</span>(90deg,  black, black 50%, transparent 50%) top    right / <span class="number">1px</span> <span class="number">100%</span> no-repeat,     <span class="built_in">linear-gradient</span>(0,      black, black 50%, transparent 50%) bottom right / <span class="number">100%</span> <span class="number">1px</span> no-repeat,     <span class="built_in">linear-gradient</span>(-90deg, black, black 50%, transparent 50%) bottom left  / <span class="number">1px</span> <span class="number">100%</span> no-repeat; &#125;</span><br></pre></td></tr></table></figure></p>
<p>圆角没法实现，而且代码比较长<br>4、通过 viewport + rem 实现的<br>当 devicePixelRatio = 2 时，输出 viewport<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>当devicePixelRatio = 3时，输出 viewport<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=0.3333333333333333, maximum-scale=0.3333333333333333, minimum-scale=0.3333333333333333, user-scalable=no"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>同时通过设置对应 viewport 的 rem 基准值，这种方式就可以像以前一样写 1px 了。<br>5、伪类 + transform<br>原理是把原先元素的 border 去掉，然后利用:before或者:after重做 border ，并 transform 的 scale 缩小一半，原先的元素相对定位，新做的 border 绝对定位</p>
<ul>
<li><p>单条 border</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hairlines</span> <span class="selector-tag">li</span>&#123;     <span class="attribute">position</span>: relative;     <span class="attribute">border</span>:none; &#125;</span><br><span class="line"><span class="selector-class">.hairlines</span> <span class="selector-tag">li</span><span class="selector-pseudo">:after</span>&#123;     <span class="attribute">content</span>: <span class="string">''</span>;     <span class="attribute">position</span>: absolute;     <span class="attribute">left</span>: <span class="number">0</span>;     <span class="attribute">background</span>: <span class="number">#000</span>;     <span class="attribute">width</span>: <span class="number">100%</span>;     <span class="attribute">height</span>: <span class="number">1px</span>;     <span class="attribute">-webkit-transform</span>: <span class="built_in">scaleY</span>(0.5);             <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(0.5);     <span class="attribute">-webkit-transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>四条 border</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hairlines</span> <span class="selector-tag">li</span>&#123;     <span class="attribute">position</span>: relative;     <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;     <span class="attribute">border</span>:none; &#125;</span><br><span class="line"><span class="selector-class">.hairlines</span> <span class="selector-tag">li</span><span class="selector-pseudo">:after</span>&#123;     <span class="attribute">content</span>: <span class="string">''</span>;     <span class="attribute">position</span>: absolute;     <span class="attribute">top</span>: <span class="number">0</span>;     <span class="attribute">left</span>: <span class="number">0</span>;     <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;     <span class="attribute">-webkit-box-sizing</span>: border-box;     <span class="attribute">box-sizing</span>: border-box;     <span class="attribute">width</span>: <span class="number">200%</span>;     <span class="attribute">height</span>: <span class="number">200%</span>;     <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(0.5);     <span class="attribute">transform</span>: <span class="built_in">scale</span>(0.5);     <span class="attribute">-webkit-transform-origin</span>: left top;     <span class="attribute">transform-origin</span>: left top; &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>样式使用的时候，也要结合 JS 代码，判断是否 Retina 屏<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.devicePixelRatio &amp;&amp; devicePixelRatio &gt;= <span class="number">2</span>)&#123;</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'ul'</span>).className = <span class="string">'hairlines'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以支持圆角，唯一的一点缺陷是td用不了。</p>
<h3 id="5、点击延迟300ms"><a href="#5、点击延迟300ms" class="headerlink" title="5、点击延迟300ms"></a>5、点击延迟300ms</h3><h4 id="问题由来"><a href="#问题由来" class="headerlink" title="问题由来"></a>问题由来</h4><p>这要追溯至 2007 年初。苹果公司在发布首款 iPhone 前夕，遇到一个问题：当时的网站都是为大屏幕设备所设计的。于是苹果的工程师们做了一些约定，应对 iPhone 这种小屏幕浏览桌面端站点的问题。 </p>
<p>这当中最出名的，当属双击缩放(double tap to zoom)，这也是会有上述 300 毫秒延迟的主要原因。双击缩放，顾名思义，即用手指在屏幕上快速点击两次，iOS 自带的 Safari 浏览器会将网页缩放至原始比例。</p>
<h4 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h4><p>1、<a href="https://github.com/ftlabs/fastclick" target="_blank" rel="external">FastClick</a>,监测touchend事件，通过Dom自定义事件触发一个模拟click事件，并且把浏览器300MS之后真正触发的click事件关掉；<br>2、touch-action 这个现在只在chrome和IE 10+支持，就是说在css设置touch-action: none后，那么对应的元素在被点击之后，浏览器不会启动缩放操作；</p>
<h3 id="6、事件穿透-pointer-event"><a href="#6、事件穿透-pointer-event" class="headerlink" title="6、事件穿透 pointer-event"></a>6、事件穿透 pointer-event</h3><p>CSS pointer-events<br>pointer-events：auto | none | visiblepainted | visiblefill | visiblestroke | visible | painted | fill | stroke | all<br>当设置为none的时候，元素永远不会成为鼠标事件的target，当然如果需要禁止点透的节点是父子关系，那么这个方法是行不通的。</p>
<p>1、同样 <a href="https://github.com/ftlabs/fastclick" target="_blank" rel="external">FastClick</a>可以解决；<br>2、用touchend代替tap事件并阻止掉touchend的默认行为preventDefault()</p>
<h3 id="7、viewport作用。"><a href="#7、viewport作用。" class="headerlink" title="7、viewport作用。"></a>7、viewport作用。</h3><p><a href="http://www.wufangbo.com/mobile-browser-viewport/" target="_blank" rel="external">手机浏览器的viewport（视觉窗口）</a></p>
<h3 id="8、闭包的用途和原理。"><a href="#8、闭包的用途和原理。" class="headerlink" title="8、闭包的用途和原理。"></a>8、闭包的用途和原理。</h3><p>闭包的场景：</p>
<ul>
<li>函数内部可以访问到外部的变量或者对象</li>
<li>使用闭包可以在JavaScript中模拟块级作用域</li>
<li>闭包可以用于在对象中创建私有变量, 不污染外部环境</li>
<li>避免垃圾回收</li>
</ul>
<p>最简形式, 还有jquery的ajax调用时候也是形成了一个闭包。：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">i</span>)</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i+<span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这篇 <a href="http://www.frontopen.com/1702.html" target="_blank" rel="external">javascript中闭包的工作原理</a> 对闭包的工作原理讲解的到位。</p>
<h3 id="9、面向对象方法的扩充。"><a href="#9、面向对象方法的扩充。" class="headerlink" title="9、面向对象方法的扩充。"></a>9、面向对象方法的扩充。</h3><p>一般使用prototype来扩充，具体的实现可以模仿jQ的构建方法，下面这一篇讲的比较好，逻辑清晰易懂。<br><a href="http://www.cnblogs.com/aaronjs/p/3278578.html" target="_blank" rel="external">jQuery 2.0.3 源码分析core - 整体架构</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/18/这只能算个日记吧/" itemprop="url">
                  这只能算个日记吧。
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-18T21:52:12+08:00" content="2016-05-18">
              2016-05-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/无题/" itemprop="url" rel="index">
                    <span itemprop="name">无题</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/18/这只能算个日记吧/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/18/这只能算个日记吧/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从地铁回去的时候经常怔怔的发呆，脑海里的思绪自己不去拨动，让他自己进行推演，会发现有时候会莫名的心慌，觉得自己这么大了，却好像一事无成，有时候却又在和周围过的不如自己好的对比，就莫名的信心膨胀，不过大部分时候，总觉得自己好像并没有什么骄傲的，拿出去可以夸奖的事情又有什么呢？有时候想了好久，自己将来到底会做什么，爱好拿起来又放下，到最后连拾起来的勇气都没有，总想到《练琴》里说的，当他再一起拿起了吉他，手上却久久的不敢拨动，好像怕惊醒了什么。</p>
<p>我想有好多的钱可以花，可以让我挥霍，让我胡吃海塞，天地任遨游，可是却觉得只是个梦，所以首先的一步还是要先有财物自由的钱吧，我觉得赚钱的话还是得靠产品，知乎前段时间出了一个产品，可以写一段话，然后把其中关键的字句给屏蔽，用户只能付费观看，如果看完觉得值的话会直接打给作者，如果看完觉得不行就捐给程序员买袜子，这是一个很好的想法，知乎变现的尝试之作，产品还是靠好idea；在豆瓣看电影的时候会有好多评分，会想怎么来根据评分选择电影呢，豆瓣没有这个功能还是把这个功能隐藏的很深，难道是用户没有这个需求来选择电影？</p>
<p>我的爱好有好多，长的也只是坚持一到两年就慢慢的开始淡了，因为我觉得最开始支撑起来的是好奇和事物的新奇度，坚持久了，发展深了，就会出现练习的枯燥，而这个时候恰恰是事物的瓶颈期，突破了，就是一个质的变化，而好多时候到这却选择了暂时性的放弃，真是满盘皆输。<br>房间那么小，却可以放的下世界地图；经历那么有限，心却那么大。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/17/github-pages从构建到评论-hexo/" itemprop="url">
                  Github Pages从构建到评论(HEXO)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-17T15:35:58+08:00" content="2016-05-17">
              2016-05-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/构建工具/" itemprop="url" rel="index">
                    <span itemprop="name">构建工具</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/17/github-pages从构建到评论-hexo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/17/github-pages从构建到评论-hexo/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是我第一次搭建博客，本来是准备自己买服务器，然后写代码来搞一套，后来无意中发现有人提到github的博客，然后搜索了一下发现是github pages,就开始跟着教程一步步搭建博客，之间走过了很多的坑，因为现在网上的很多教程都是很久以前的资料，而且到处搬来搬去，在这里总结一下。</p>
<h2 id="GitHub-Pages是什么？"><a href="#GitHub-Pages是什么？" class="headerlink" title="GitHub Pages是什么？"></a>GitHub Pages是什么？</h2><p>GitHub Pages 本用于介绍托管在 GitHub 的项目， 不过，由于他的空间免费稳定，用来做搭建一个博客再好不过了。</p>
<h2 id="使用-GitHub-Pages-建立博客"><a href="#使用-GitHub-Pages-建立博客" class="headerlink" title="使用 GitHub Pages 建立博客"></a>使用 GitHub Pages 建立博客</h2><h3 id="注册GitHub"><a href="#注册GitHub" class="headerlink" title="注册GitHub"></a>注册GitHub</h3><p>访问：<a href="http://www.github.com/" target="_blank" rel="external">http://www.github.com/</a><br>注册你的username和邮箱，邮箱十分重要，GitHub上很多通知都是通过邮箱的。</p>
<h3 id="建立博客项目"><a href="#建立博客项目" class="headerlink" title="建立博客项目"></a>建立博客项目</h3><p>与 GitHub 建立好链接之后，就可以方便的使用它提供的Pages服务，GitHub Pages分两种，一种是你的GitHub用户名建立的username.github.io这样的用户&amp;组织页（站），另一种是依附项目的pages。</p>
<p>想建立个人博客是用的第一种，形如gaojianqi6.github.io这样的可访问的站，每个用户名下面只能建立一个。</p>
<p>在github.com页面选择 New repository, 然后在Repository name里填写username.github.io（必须为这个仓库名）</p>
<h2 id="开始Hexo"><a href="#开始Hexo" class="headerlink" title="开始Hexo"></a>开始Hexo</h2><p>首先本地得装上了Node.js、Git和Hexo<br>    安装Node.js: <a href="https://nodejs.org/en/" target="_blank" rel="external">Nodejs官网</a><br>    安装Git: <a href="http://git-scm.com/" target="_blank" rel="external">Git</a><br>            <a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137396287703354d8c6c01c904c7d9ff056ae23da865a000/" title="安装Git - 廖雪峰的官方网站" target="_blank" rel="external">安装Git - 廖雪峰的官方网站</a><br>    安装Hexo: <a href="https://hexo.io/" title="hexo官网" target="_blank" rel="external">Hexo</a></p>
<p>下载安装之后可以在本地启动查看一下，默认监听4000端口，打开浏览器，输入 localhost:4000 就可以看到一个hexo的默认博客主题页面出现在你面前。</p>
<h2 id="配置-SSH-keys"><a href="#配置-SSH-keys" class="headerlink" title="配置 SSH keys"></a>配置 SSH keys</h2><p>我们如何让本地git项目与远程的github建立联系呢？用SSH keys。</p>
<h3 id="检查-SSH-keys的设置"><a href="#检查-SSH-keys的设置" class="headerlink" title="检查 SSH keys的设置"></a>检查 SSH keys的设置</h3><p>首先我们需要检查你电脑上现有的ssh key：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh 检查本机的ssh密钥</span><br></pre></td></tr></table></figure></p>
<p>如果提示：No such file or directory 说明你是第一次使用git。</p>
<h3 id="生成新的SSH-Key："><a href="#生成新的SSH-Key：" class="headerlink" title="生成新的SSH Key："></a>生成新的SSH Key：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"邮件地址@youremail.com"</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/Users/your_user_directory/.ssh/id_rsa):&lt;回车就好&gt;</span><br></pre></td></tr></table></figure>
<p>然后系统会要你输入密码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):&lt;输入加密串&gt;</span><br><span class="line">Enter same passphrase again:&lt;再次输入加密串&gt;</span><br></pre></td></tr></table></figure></p>
<p>在回车中会提示你输入一个密码，这个密码会在你提交项目时使用，如果为空的话提交项目时则不用输入。这个设置是防止别人往你的项目里提交内容。</p>
<p>注意：输入密码的时候没有*字样的，你直接输入就可以了。</p>
<h3 id="添加-SSH-Key-到-GitHub"><a href="#添加-SSH-Key-到-GitHub" class="headerlink" title="添加 SSH Key 到 GitHub"></a>添加 SSH Key 到 GitHub</h3><p>在本机设置SSH Key之后，需要添加到GitHub上，以完成SSH链接的设置。</p>
<p>1、打开本地~\id_rsa.pub文件。此文件里面内容为刚才生成人密钥。如果看不到这个文件，你需要设置显示隐藏文件。准确的复制这个文件的内容，才能保证设置的成功。<br>2、登陆github系统。点击右上角的 Account Settings—&gt;SSH Public keys —&gt; add another public keys<br>3、把你本地生成的密钥复制到里面（key文本框中）， 点击 add key 就ok了</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>可以输入下面的命令，看看设置是否成功，git@github.com的部分不要修改：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure></p>
<h3 id="多个SSH-Key"><a href="#多个SSH-Key" class="headerlink" title="多个SSH Key"></a>多个SSH Key</h3><p>1.生成指定名字的密钥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"邮箱地址"</span> <span class="_">-f</span> ~/.ssh/id_rsa_github</span><br></pre></td></tr></table></figure></p>
<pre><code>会生成id_rsa.pub和id_rsa_github两个文件
</code></pre><p>2.密钥复制到托管平台上<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  vim ~/.ssh/id_rsa_github.pub</span><br></pre></td></tr></table></figure></p>
<p>3.修改config文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/config <span class="comment">#修改config文件，如果没有创建 config</span></span><br></pre></td></tr></table></figure></p>
<pre><code>#Github  (github 配置)
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_github

#oschina.net (开源中国 配置)
Host oschina.net
    HostName git.oschina.net
    User git
    IdentityFile ~/.ssh/id_rsa
</code></pre><p>配置完之后：<br><img src="http://o7bfyflfi.bkt.clouddn.com/ssh.jpg" alt="配置SSH完成"><br>修改完之后可以测试一下。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com   <span class="comment">#github.com 对应Host</span></span><br></pre></td></tr></table></figure></p>
<h2 id="部署到github"><a href="#部署到github" class="headerlink" title="部署到github"></a>部署到github</h2><p>到github新建一个项目，项目名为：<em>你的用户名</em>.github.io必须为这个名字</p>
<p>配置文件<em>_config.yml</em></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> git</span><br><span class="line"><span class="attr">  repository:</span> git@github.com:你的帐号/你的帐号.github.com.git</span><br><span class="line">  例如我的：repository: git@github.com:gaojianqi6/gaojianqi6.github.io.git</span><br><span class="line"><span class="attr">  branch:</span> master</span><br></pre></td></tr></table></figure>
<p>之前有的教程deploy的type是github,这里需要改成git，然后运行下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>然后执行命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure></p>
<p>命令缩写<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="comment">#写文章</span></span><br><span class="line">hexo g <span class="comment">#生成</span></span><br><span class="line">hexo d <span class="comment">#部署 # 可与hexo g合并为 hexo d -g</span></span><br></pre></td></tr></table></figure></p>
<p>在source文件夹里面添加CNAME文件，里面填写自己的独立域名。<br>有的使用Hexo和Github部署好之后但是一直404，有可能就是没有在根目录下面添加CNAME文件。</p>
<p>PS:以后的404页面，favicon.ico也是直接在source下面添加</p>
<h2 id="将独立域名与-GitHub-Pages-的空间绑定"><a href="#将独立域名与-GitHub-Pages-的空间绑定" class="headerlink" title="将独立域名与 GitHub Pages 的空间绑定"></a>将独立域名与 GitHub Pages 的空间绑定</h2><p>选择ping命令之后出现的地址，在您自己的域名管理里面更改一下域名解析，这个可能需要几分钟之后才能生效。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ping username.github.io</span><br></pre></td></tr></table></figure></p>
<h2 id="选择Hexo主题"><a href="#选择Hexo主题" class="headerlink" title="选择Hexo主题"></a>选择Hexo主题</h2><p>Hexo有很多可以选择的主题，可以在下面的链接中选择自己喜欢的主题：<br><a href="https://www.zhihu.com/question/24422335" target="_blank" rel="external">有哪些好看的 Hexo 主题？</a><br><a href="https://hexo.io/themes/" title="Hexo官网主题站" target="_blank" rel="external">Hexo themes</a></p>
<p>我选择了<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">Next</a>主题，在这里查看怎么安装Next -&gt; <a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">安装Next</a></p>
<h2 id="目录介绍"><a href="#目录介绍" class="headerlink" title="目录介绍"></a>目录介绍</h2><p>默认目录结构：</p>
<pre><code>.
├── .deploy
├── public
├── scaffolds
├── scripts
├── source
|   ├── _drafts
|   └── _posts
├── themes
├── _config.yml
└── package.json

.deploy：执行hexo deploy命令部署到GitHub上的内容目录
public：执行hexo generate命令，输出的静态网页内容目录
scaffolds：layout模板文件目录，其中的md文件可以添加编辑
scripts：扩展脚本目录，这里可以自定义一些javascript脚本
source：文章源码目录，该目录下的markdown和html文件均会被hexo处理。该页面对应repo的根目录，404文件、favicon.ico文件，CNAME文件等都应该放这里，该目录下可新建页面目录。
_drafts：草稿文章
_posts：发布文章
themes：主题文件目录
_config.yml：全局配置文件，大多数的设置都在这里
package.json：应用程序数据，指明hexo的版本等信息，类似于一般软件中的 关于 按钮
</code></pre><h2 id="404页面"><a href="#404页面" class="headerlink" title="404页面"></a>404页面</h2><p>有很多用作公益的404接入地址，我选择了腾讯的。404页面，每个人可以做的更多一点。<br>    <a href="http://www.qq.com/404" target="_blank" rel="external">腾讯公益404</a><br>    <a href="http://yibo.iyiyun.com/Index/web404" target="_blank" rel="external">404公益_益云(公益互联网)社会创新中心</a><br>    <a href="http://404page.missingkids.org.tw/" target="_blank" rel="external">失蹤兒童少年資料管理中心404</a><br>在source目录下添加新建404.html，然后复制内容：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>宝贝，公益404带你们回家<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://www.qq.com/404/search_children.js"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">homePageUrl</span>=<span class="string">"http://yoursitename.com"</span> <span class="attr">homePageName</span>=<span class="string">"回到我的主页"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="评论插件"><a href="#评论插件" class="headerlink" title="评论插件"></a>评论插件</h2><p>流行的评论插件有: <a href="http://duoshuo.com/" target="_blank" rel="external">多说</a>、<a href="http://www.uyan.cc/" target="_blank" rel="external">友言</a>、<a href="https://disqus.com/" target="_blank" rel="external">Disqus</a>等<br>安装多说主题又是Next的，可以在这里<a href="http://theme-next.iissnan.com/getting-started.html#comment-system-duoshuo" target="_blank" rel="external">查看</a>。</p>
<h2 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h2><p>考虑到博客的速度，同时也为了便于博客的迁移，图床是必须的。可以看一下<a href="http://www.qiniu.com/" target="_blank" rel="external">七牛</a>，访问速度极快，支持日志、防盗链和水印。<br>也还可以考虑下面的图床服务 <a href="http://www.farbox.com/" target="_blank" rel="external">FarBox</a> ， <a href="http://www.dropbox.com/" target="_blank" rel="external">Dropbox</a> ， <a href="http://www.upyun.com/" target="_blank" rel="external">又拍云</a> 。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars3.githubusercontent.com/u/1460571?v=3&s=460"
               alt="Jerome Gao" />
          <p class="site-author-name" itemprop="name">Jerome Gao</p>
          <p class="site-description motion-element" itemprop="description">博客, jerome, github, react.js</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerome Gao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"gaojianqi"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
